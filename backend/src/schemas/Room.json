{
  "fields": {
    "name": {
      "type": "String",
      "description": "Name of the room."
    },
    "code": {
      "type": "String",
      "required": true,
      "unique": true,
      "match": "/^[0-9]{6}$/",
      "description": "A unique 6-digit room code."
    },
    "players": {
      "type": "Object",
      "required": true,
      "description": "List of players in the room (max 2 players).",
      "properties": {
        "white": {
          "type": "ObjectId",
          "ref": "User"
        },
        "black": {
          "type": "ObjectId",
          "ref": "User"
        }
      },
      "validate": {
        "validator": "function(v) { return Object.keys(v).length <= 2; }",
        "message": "Maximum 2 players allowed"
      }
    },
    "gameId": {
      "type": "ObjectId",
      "ref": "Game",
      "description": "Reference to the game being played in the room."
    },
    "status": {
      "type": "String",
      "enum": ["waiting", "ready", "in_game", "closed"],
      "default": "waiting"
    }
  },
  "useFieldsFrom": ["detail"],
  "behaviors": ["generateRoomCode", "preSave"]
}
